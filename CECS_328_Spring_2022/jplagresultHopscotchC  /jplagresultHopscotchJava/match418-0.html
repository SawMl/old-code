<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>657414231</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>StudentSolver.java</CENTER></H3><HR>
<PRE>
import java.util.ArrayList;
import java.util.Arrays;

public class StudentSolver {

    public static ArrayList&lt;Integer&gt; solve1(ArrayList&lt;ArrayList&lt;Integer&gt;&gt; grid) {
        printGrid(grid);

        return null;
    }

    public static ArrayList&lt;Integer&gt; solve(ArrayList&lt;ArrayList&lt;Integer&gt;&gt; grid) {
        int maxTotal = 0;
<A NAME="0"></A>        ArrayList&lt;Integer&gt; correctWay = null;

        int m = grid.size();
        int n = <FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match418-1.html#0',3,'match418-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>grid.get(0).size();

        
        for (int i = 0; i &lt; grid.get(0).size(); i++) {
            ArrayList&lt;ArrayList&lt;ArrayList&lt;Integer&gt;&gt;&gt; tree = new</B></FONT> ArrayList&lt;&gt;();

            tree.add(new ArrayList&lt;&gt;());
            tree.get(0).add(new ArrayList&lt;&gt;(Arrays.asList(grid.get(0).get(i), 0, i, grid.get(0).get(i))));
            tree.get(0).add(new ArrayList&lt;&gt;(Arrays.asList(1, i)));

            int stepsLeft = grid.get(0).size() - 1;
            int currentTreeIndex = 0;

            while (stepsLeft &gt; 0) {
                
                ArrayList&lt;ArrayList&lt;Integer&gt;&gt; currentTreeLine = tree.get(currentTreeIndex);

                
                tree.add(new ArrayList&lt;&gt;());

                
                for (int j = 0; j &lt; tree.get(currentTreeIndex).size(); j+=2) {

                    
                    ArrayList&lt;Integer&gt; currentPossibleWay = currentTreeLine.get(j);
                    ArrayList&lt;Integer&gt; currentGoldsteinArray = currentTreeLine.get(j+1);
                    
                    int currentRow = currentPossibleWay.get(1);
                    int currentCol = currentPossibleWay.get(2);
                    
                    ArrayList&lt;Integer&gt; possibleSteps = getPossibleSteps(grid, currentRow, stepsLeft);

                    
                    int nextRow;
                    int nextCol;

                    
                    if (currentCol == grid.get(0).size() - 1) {
                        nextCol = 0;
                    } else
                        nextCol = currentCol + 1;

                    
                    for (int step : possibleSteps) {
                        ArrayList&lt;Integer&gt; newPossibleWay = new ArrayList&lt;&gt;(currentPossibleWay);
                        ArrayList&lt;Integer&gt; newGoldsteinArray = new ArrayList&lt;&gt;(currentGoldsteinArray);

                        
                        if (step == 1) {
                            if (currentRow == 0)
                                nextRow = grid.size() - 1;
                            else
                                nextRow = currentRow - 1;

                            newGoldsteinArray.add(1);
                        }

                        
                        else if (step == -1) {
                            if (currentRow == grid.size() - 1)
                                nextRow = 0;
                            else
                                nextRow = currentRow + 1;

                            newGoldsteinArray.add(-1);
                        }

                        
                        else {
                            nextRow = currentRow;

                            newGoldsteinArray.add(0);
                        }

                        
                        int nextStepValue = grid.get(nextRow).get(nextCol);
                        int total = newPossibleWay.get(0) + nextStepValue;

                        if (stepsLeft == 1) {
                            if (total &gt; maxTotal) {
                                maxTotal = total;
                                correctWay = newGoldsteinArray;
                            }
<A NAME="1"></A>                        } else {

                            
                            <FONT color="#f63526"><A HREF="javascript:ZweiFrames('match418-1.html#1',3,'match418-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>newPossibleWay.add(nextStepValue);

                            
                            newPossibleWay.remove(0);
                            newPossibleWay.remove(0);
                            newPossibleWay.remove(0);
                            newPossibleWay.add(0, nextCol);
                            newPossibleWay.add(0, nextRow);
                            newPossibleWay.add(0, total);

                            
                            tree.get(currentTreeIndex + 1).add(newPossibleWay);
                            tree.get(currentTreeIndex + 1).add(newGoldsteinArray);
                        }
                    }
                }</B></FONT>
                
                currentTreeIndex += 1;
<A NAME="2"></A>                stepsLeft -= 1;
            }

        <FONT color="#77bfc7"><A HREF="javascript:ZweiFrames('match418-1.html#2',3,'match418-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>}

        
        for (int i = 0; i &lt; grid.get(0).size(); i++) {
<A NAME="3"></A>            ArrayList&lt;ArrayList&lt;ArrayList&lt;Integer&gt;&gt;&gt; tree = new</B></FONT> ArrayList&lt;&gt;();

            tree.add(new ArrayList&lt;&gt;());
            tree.get(0).add(<FONT color="#6cc417"><A HREF="javascript:ZweiFrames('match418-1.html#3',3,'match418-top.html#3',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>new ArrayList&lt;&gt;(Arrays.asList(grid.get(grid.size() - 1).get(i), grid.size() - 1, i, grid.get(grid.size() - 1).get(i))));
            tree.get(0).add</B></FONT>(new ArrayList&lt;&gt;(Arrays.asList(0, i)));

            int stepsLeft = grid.get(0).size() - 1;
            int currentTreeIndex = 0;

            while (stepsLeft &gt; 0) {
                
                ArrayList&lt;ArrayList&lt;Integer&gt;&gt; currentTreeLine = tree.get(currentTreeIndex);

                
                tree.add(new ArrayList&lt;&gt;());

                
                for (int j = 0; j &lt; tree.get(currentTreeIndex).size(); j+=2) {

                    
                    ArrayList&lt;Integer&gt; currentPossibleWay = currentTreeLine.get(j);
                    ArrayList&lt;Integer&gt; currentGoldsteinArray = currentTreeLine.get(j+1);
                    
                    int currentRow = currentPossibleWay.get(1);
                    int currentCol = currentPossibleWay.get(2);
                    
                    ArrayList&lt;Integer&gt; possibleSteps = getPossibleSteps(grid, currentRow, stepsLeft);

                    
                    int nextRow;
                    int nextCol;

                    
                    if (currentCol == grid.get(0).size() - 1) {
                        nextCol = 0;
                    } else
                        nextCol = currentCol + 1;

                    
                    for (int step : possibleSteps) {
                        ArrayList&lt;Integer&gt; newPossibleWay = new ArrayList&lt;&gt;(currentPossibleWay);
                        ArrayList&lt;Integer&gt; newGoldsteinArray = new ArrayList&lt;&gt;(currentGoldsteinArray);

                        
                        if (step == 1) {
                            if (currentRow == 0)
                                nextRow = grid.size() - 1;
                            else
                                nextRow = currentRow - 1;

                            newGoldsteinArray.add(1);
                        }

                        
                        else if (step == -1) {
                            if (currentRow == grid.size() - 1)
                                nextRow = 0;
                            else
                                nextRow = currentRow + 1;

                            newGoldsteinArray.add(-1);
                        }

                        
                        else {
                            nextRow = currentRow;

                            newGoldsteinArray.add(0);
                        }

                        
                        int nextStepValue = grid.get(nextRow).get(nextCol);
                        int total = newPossibleWay.get(0) + nextStepValue;

                        if (stepsLeft == 1) {
                            if (total &gt; maxTotal) {
<A NAME="4"></A>                                maxTotal = total;
                                correctWay = newGoldsteinArray;
                            }
                        } else <FONT color="#151b8d"><A HREF="javascript:ZweiFrames('match418-1.html#4',3,'match418-top.html#4',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>{
                            
                            newPossibleWay.add(nextStepValue);

                            
                            newPossibleWay.remove(0);
                            newPossibleWay.remove(0);
                            newPossibleWay.remove(0);
                            newPossibleWay.add(0, nextCol);
                            newPossibleWay.add(0, nextRow);
                            newPossibleWay.add(0, total);

                            
                            tree.get(currentTreeIndex + 1).add(newPossibleWay);
                            tree.get(currentTreeIndex + 1).add(newGoldsteinArray);
                        }</B></FONT>
                    }
                }
                
                currentTreeIndex += 1;
                stepsLeft -= 1;
            }
        }
        return correctWay;
    }

    public static void printGrid(ArrayList&lt;ArrayList&lt;Integer&gt;&gt; grid) {
<A NAME="5"></A>        System.out.println(&quot;Size: (&quot; + grid.size() + &quot;, &quot; + grid.get(0).size() + &quot;)&quot;);

        for (ArrayList&lt;Integer&gt; row : grid) {
            <FONT color="#c8c2a7"><A HREF="javascript:ZweiFrames('match418-1.html#5',3,'match418-top.html#5',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>for (int num : row) {
                System.out.print(num + &quot; &quot;);
            }
<A NAME="6"></A>            System.out.println();
        }</B></FONT>

        <FONT color="#50ebec"><A HREF="javascript:ZweiFrames('match418-1.html#6',3,'match418-top.html#6',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>System.out.println();
    }

    public static ArrayList&lt;Integer&gt; getPossibleSteps(ArrayList&lt;ArrayList&lt;Integer&gt;&gt; grid, int currentRow, int stepsLeft) {
        int middleRow = grid.size() / 2</B></FONT>;
        ArrayList&lt;Integer&gt; possibleSteps = new ArrayList&lt;&gt;();

        int rowIndex;

        if (currentRow &lt; middleRow) {
            rowIndex = currentRow;
            possibleSteps.add(1);
            if (stepsLeft - rowIndex &gt;= 2)
                possibleSteps.add(-1);
        } else if (currentRow &gt; middleRow) {
            rowIndex = (grid.size() - currentRow - 1);
            possibleSteps.add(-1);
            if (stepsLeft - rowIndex &gt;= 2)
                possibleSteps.add(1);
        } else {
            rowIndex = currentRow;
            possibleSteps.add(1);
            possibleSteps.add(-1);
        }
        if (rowIndex &lt; stepsLeft)
            possibleSteps.add(0);

        return possibleSteps;
    }
}
</PRE>

</BODY>
</HTML>
