<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>406027977</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>StudentSolver.java</CENTER></H3><HR>
<PRE>
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Random;

public class StudentSolver {
	
	private static List&lt;String&gt; numList = new ArrayList&lt;String&gt;();
	
	public static void permutation(int n) {
		permutation(new int[n], 0);
	}
	
	private static void permutation(int[] a, int i) {
		if (i == a.length) {
			print(a);
			return;
		}
<A NAME="0"></A>		a[i] = 0;
		permutation(a, i + 1);
		a[i] = 1;
		permutation(a,<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match337-0.html#0',2,'match337-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B> i + 1);
	}
	
	private static void print(int[] a) {
		String s = &quot;&quot;;
		for (int i = 0; i &lt; a.length</B></FONT>; i++) {
			s = s + a[i];
		}
		numList.add(s);
	}

	public static ArrayList solve(ArrayList&lt;ArrayList&gt; bulbs) {
		ArrayList list = new ArrayList();
		boolean whileBoolean = false;
		int maxNum = 0;
		for (ArrayList l : bulbs) {
			for (Object i : l) {
				if (Math.abs((Integer) i) &gt; maxNum) {
					maxNum = Math.abs((Integer) i);
				}
			}
		}
		int i = 1;
		List&lt;Map&lt;Integer, Boolean&gt;&gt; getNumber = getNumber(maxNum);
		Map&lt;Map&lt;Integer, Boolean&gt;,Boolean&gt; checkMap =new HashMap&lt;Map&lt;Integer, Boolean&gt;,Boolean&gt;();
		for(Map&lt;Integer, Boolean&gt; map : getNumber){
			if (validateAllRows(map, bulbs)) {
				for (Boolean value : map.values()) {
					list.add(value);
				}
				return list;
			}
			if(i==getNumber.size()){
				for (Boolean value : map.values()) {
					list.add(value);
<A NAME="2"></A>				}
				System.out.println(i);
				return list;
			}<FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match337-0.html#2',2,'match337-top.html#2',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>
			i++;
		}
		return list;
	}

	private static boolean validateAllRows(Map&lt;Integer, Boolean&gt; randomNumber, ArrayList&lt;ArrayList&gt; bulbs) {
<A NAME="5"></A>		for (ArrayList list : bulbs) {</B></FONT>
			if (!validateRows(randomNumber, list)) {
				return false;
			}<FONT color="#c8c2a7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match337-0.html#5',2,'match337-top.html#5',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>
		}
		return true;
	}

	private static boolean validateRows(Map&lt;Integer, Boolean&gt; randomNumber, ArrayList rows) {
		int nowNum = 0;
		boolean nowBoolean = false;</B></FONT>
		for (Object i : rows) {
			nowNum = (Integer) i;
			nowBoolean = randomNumber.get(Math.abs(nowNum));
<A NAME="3"></A>			if (nowNum != Math.abs(nowNum)) {
				nowBoolean = !nowBoolean;
			}
			if (nowBoolean) {<FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match337-0.html#3',2,'match337-top.html#3',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>
				return nowBoolean;
			}
		}
		return nowBoolean;
	}

	private static Map&lt;Integer, Boolean&gt; initNumber(int numberM) {
		Map&lt;Integer, Boolean&gt; resultMap = new HashMap&lt;Integ</B></FONT>er, Boolean&gt;();
<A NAME="1"></A>		Random r = new Random();
		for (int i = 1; i &lt;= numberM; i++) {
			resultMap.put(i, r.nextBoolean());
		}<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match337-0.html#1',2,'match337-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>
		return resultMap;
	}
	
	private static Map&lt;Integer, Boolean&gt; randomNumber(int numberM,Map&lt;Integer,Integer&gt; map) {
		Map&lt;Integer, Boolean&gt; resultMap = new HashMap&lt;Integer, Boolean&gt;();</B></FONT>
		int maxNum = 0;
		int maxCount = 0;
		Random r = new Random();
		for (int i = 1; i &lt;= numberM; i++) {
			if(null!=map.get(i)&amp;&amp;map.get(i)&gt;0&amp;&amp;null==map.get(i-2*i)){
				resultMap.put(i, true);
				continue;
			}
			if(null!=map.get(i-2*i)&amp;&amp;map.get(i-2*i)&gt;0&amp;&amp;null==map.get(i)){
				resultMap.put(i, false);
				continue;
			}
			resultMap.put(i, r.nextBoolean());
		}
		for(Integer i : map.keySet()){
			if(map.get(i)&gt;maxCount){
				maxNum = i;
				maxCount = map.get(i);
			}
		}
		if(maxNum &gt; 0){
			resultMap.put(maxNum, true);
		}else{
			resultMap.put(Math.abs(maxNum), false);
		}
		return resultMap;
	}
	
	private static List&lt;Map&lt;Integer, Boolean&gt;&gt; getNumber(int numberM) {
		numList.clear();
		permutation(numberM);
		List&lt;Map&lt;Integer, Boolean&gt;&gt; resultList = new ArrayList&lt;Map&lt;Integer, Boolean&gt;&gt;();
		Map&lt;Integer, Boolean&gt; resultMap = null;
		String[] s = null;
		int i = 1;
		for (String map : numList) {
			i = 1;
			resultMap = new HashMap&lt;Integer, Boolean&gt;();
<A NAME="4"></A>			s = map.split(&quot;&quot;);
			for (String each : s) {
				if(&quot;0&quot;.equals(each)){
					resultMap.put(i, true);<FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match337-0.html#4',2,'match337-top.html#4',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>
				}else{
					resultMap.put(i, false);
				}
				i++;
			}
			resultList.add(resultMap);</B></FONT>
		}
		return resultList;
	}

}
</PRE>

</BODY>
</HTML>
